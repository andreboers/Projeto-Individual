<!DOCTYPE html>
<html lang="en">

<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/quiz.css">
        <title>MineTech | Quiz</title>
</head>

<body>
        <div id="divCraftingTable">

                <div id="imagemCraftingTable">
                        <div id="line1">
                                <div class="droptarget" id="i_1" ondrop="drop(event)" ondragover="allowDrop(event)">
                                </div>
                                <div class="droptarget" id="i_2" ondrop="drop(event)" ondragover="allowDrop(event)">
                                </div>
                                <div class="droptarget" id="i_3" ondrop="drop(event)" ondragover="allowDrop(event)">
                                </div>
                        </div>
                        <div id="line2">
                                <div class="droptarget" id="i_4" ondrop="drop(event)" ondragover="allowDrop(event)">
                                </div>
                                <div class="droptarget" id="i_5" ondrop="drop(event)" ondragover="allowDrop(event)">
                                </div>
                                <div class="droptarget" id="i_6" ondrop="drop(event)" ondragover="allowDrop(event)">
                                </div>
                        </div>
                        <div id="line3">
                                <div class="droptarget" id="i_7" ondrop="drop(event)" ondragover="allowDrop(event)">
                                </div>
                                <div class="droptarget" id="i_8" ondrop="drop(event)" ondragover="allowDrop(event)">
                                </div>
                                <div class="droptarget" id="i_9" ondrop="drop(event)" ondragover="allowDrop(event)">
                                </div>
                        </div>
                </div>



                <div id="line1">
                        <div class="droptarget" id="i_1" ondrop="drop(event)" ondragover="allowDrop(event)">
                                <!-- Graveto 1 -->
                                <div class="droptarget item graveto" ondragstart="dragStart(event)" draggable="true"
                                        id="graveto1">
                                </div>
                        </div>
                        <div class="droptarget" id="i_2" ondrop="drop(event)" ondragover="allowDrop(event)">
                                <!-- Graveto 1 -->
                                <div class="droptarget item graveto" ondragstart="dragStart(event)" draggable="true"
                                        id="graveto2">
                                </div>
                        </div>
                        <div class="droptarget" id="i_4" ondrop="drop(event)" ondragover="allowDrop(event)">
                                <!-- Diamante 1 -->
                                <div class="droptarget item diamante" ondragstart="dragStart(event)" draggable="true"
                                        id="diamante1">
                                </div>
                        </div>
                        <div class="droptarget" id="i_5" ondrop="drop(event)" ondragover="allowDrop(event)">
                                <!-- Diamante 2 -->
                                <div class="droptarget item diamante" ondragstart="dragStart(event)" draggable="true"
                                        id="diamante2">
                                </div>
                        </div>
                        <div class="droptarget" id="i_6" ondrop="drop(event)" ondragover="allowDrop(event)">
                                <!-- Diamante 3 -->
                                <div class="droptarget item diamante" ondragstart="dragStart(event)" draggable="true"
                                        id="diamante3">
                                </div>
                        </div>
                        <div class="droptarget" id="i_3" ondrop="drop(event)" ondragover="allowDrop(event)">
                                <!-- Graveto 1 -->
                                <div class="droptarget item graveto" ondragstart="dragStart(event)" draggable="true"
                                        id="graveto3">
                                </div>
                        </div>
                        <div class="droptarget" id="i_7" ondrop="drop(event)" ondragover="allowDrop(event)">
                                <div class="droptarget item" ondragstart="dragStart(event)" draggable="true"
                                        id="graveto7">
                                </div>
                        </div>
                        <div class="droptarget" id="i_8" ondrop="drop(event)" ondragover="allowDrop(event)">

                        </div>
                        <div class="droptarget" id="i_9" ondrop="drop(event)" ondragover="allowDrop(event)">

                        </div>
                </div>

                <div id="items" ondrop="drop(event)" ondragover="allowDrop(event)">

                </div>

                <button onclick="verificar()">Verificar Crafting</button>
        </div>
</body>

</html>

<script>
        function dragStart(event) {
                event.dataTransfer.setData("Text", event.target.id);
        }

        function allowDrop(event) {
                event.preventDefault();
        }

        function drop(event) {
                event.preventDefault();
                const data = event.dataTransfer.getData("Text");
                event.target.appendChild(document.getElementById(data));
        }

        var receitaCorreta = {
                i_1: null,
                i_2: "diamante",
                i_3: null,
                i_4: null,
                i_5: "diamante",
                i_6: null,
                i_7: null,
                i_8: "graveto",
                i_9: null
        };

        function verificar() {
                var correto = true;

                for (var slot in receitaCorreta) {
                        var slotElement = document.getElementById(slot);
                        var item = slotElement.querySelector(".item");
                        var esperadoClasse = receitaCorreta[slot];

                        if (esperadoClasse === null && item !== null) {
                                correto = false;
                                break;
                        } else if (esperadoClasse !== null) {
                                if (!item || !item.classList.contains(esperadoClasse)) {
                                        correto = false;
                                        break;
                                }
                        }
                }

                if (correto) {
                        alert("correto");
                } else {
                        alert("incorreto");
                }
        }       
</script>